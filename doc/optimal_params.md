# 光纤陀螺导航系统参数标定记录

## 概述

本文档记录了光纤陀螺 (FOG) 惯性导航系统的参数标定过程和最优参数。通过刻度因数标定和参数优化，导航精度从 **1.366 nm/h 提升至 0.909 nm/h**，改进幅度 **33.5%**。

---

## 1. FOG 刻度因数标定

### 1.1 标定原理

静止状态下，光纤陀螺测量的角速度应等于地球自转角速度在本体坐标系的投影。通过比较FOG测量模值与理论地球自转模值，可估算刻度因数误差。

$$
K = \frac{|\boldsymbol{\omega}_{ie}|}{|\boldsymbol{\omega}_{fog}|}
$$

### 1.2 实测数据分析

**测试条件:**
- 位置: 南京 (32.0286°N, 118.8533°E, 17m)
- 数据: 3小时静态数据 (前2小时取均值)
- 采样率: 400 Hz

**FOG 测量值 (2h 均值):**
| 分量 | 测量值 (deg/h) |
|------|----------------|
| $\omega_x$ | 0.0826 |
| $\omega_y$ | 12.7571 |
| $\omega_z$ | 7.9571 |
| **$|\boldsymbol{\omega}|$** | **15.0355** |

**理论值 ($\boldsymbol{\omega}_{ie}^n$ 投影至体坐标系):**
| 分量 | 理论值 (deg/h) |
|------|----------------|
| $\omega_x$ | 0.0000 |
| $\omega_y$ | 12.7516 |
| $\omega_z$ | 7.9769 |
| **$|\boldsymbol{\omega}|$** | **15.0411** |

### 1.3 标定结果

| 参数 | 值 |
|------|-----|
| **刻度因数 K** | **1.000372** |
| **偏差** | **371.67 ppm** |

刻度因数修正公式:
$$
\boldsymbol{\omega}_{corrected} = K \cdot \boldsymbol{\omega}_{raw}
$$

---

## 2. 最优参数

### 2.1 标定后最优参数

**初始姿态误差:**
| 轴 | 值 (deg) | 值 (rad) |
|----|----------|----------|
| Pitch | 0.0344 | 6.004e-4 |
| **Roll** | **0.3300** | **5.760e-3** |
| Yaw | 0.5900 | 1.030e-2 |

**陀螺零偏:**
| 轴 | 值 (deg/h) | 值 (rad/s) |
|----|------------|------------|
| X | 0.0000 | 0 |
| Y | 0.0000 | 0 |
| **Z** | **0.0190** | **9.21e-8** |

### 2.2 标定前参数 (历史记录)

| 参数 | 标定前 | 标定后 | 变化 |
|------|--------|--------|------|
| Roll | 0.335° | 0.330° | -0.005° |
| eb_z | -0.0103 deg/h | +0.0190 deg/h | **反号** |

---

## 3. 导航性能对比

### 3.1 测试结果汇总

| 配置 | 漂移 (nm/h) | 备注 |
|------|-------------|------|
| 原始数据 + 原始参数 | 1.3660 | 标定前基线 |
| 原始数据 + eb=0 | 1.3096 | |
| 标定数据 + 原始参数 | 1.4887 | 参数不匹配 |
| 标定数据 + eb=0 | 1.4262 | |
| **标定数据 + 新参数** | **0.9091** | **最优** |

### 3.2 改进分析

$$
\text{改进率} = \frac{1.3660 - 0.9091}{1.3660} \times 100\% = \mathbf{33.5\%}
$$

**关键发现:**
1. 刻度因数修正后，原参数失效 (漂移恶化至 1.489 nm/h)
2. 零偏 $eb_z$ 符号反转是主要变化 (-0.0103 → +0.0190)
3. 刻度因数修正与零偏估计存在耦合关系

---

## 4. 技术说明

### 4.1 零偏符号反转的物理解释

刻度因数 $K > 1$ 意味着原始 FOG 测量偏小。修正后:
- 测量的地球自转分量增大
- 扣除地球自转后的残差 (即零偏估计) 方向改变
- 因此 $eb_z$ 从负值变为正值

### 4.2 参数搜索方法

采用二维网格搜索 + 精细化:
1. **粗搜索**: roll ∈ [0, 0.7°], eb_z ∈ [-0.02, 0.02] deg/h, 步长 0.05°/0.005 deg/h
2. **精细搜索**: 在最优点附近 ±1 步长内精搜

固定参数: pitch = 0.0344°, yaw = 0.590°, eb_x = eb_y = 0

### 4.3 数据预处理

1. 加载 CSV 数据 (角速度单位: rad/s)
2. 乘以采样周期得角增量
3. 对陀螺角增量乘以刻度因数 K

---

## 5. 代码接口

### 5.1 刻度因数修正

```cpp
// 计算刻度因数
double K = 15.0411 / 15.0355;  // = 1.000372

// 应用修正
for (auto& imu : imu_data) {
    imu.wm *= K;  // 陀螺角增量乘以刻度因数
}
```

### 5.2 导航初始化

```cpp
#include "sins_engine.h"

// 标定后最优参数
Vec3d att_deg(0.0344, 0.3300, 0.5900);
Vec3d eb_dph(0.0, 0.0, 0.0190);

// 转换单位
Vec3d att = att_deg * DEG2RAD;
Vec3d eb = eb_dph * DEG2RAD / 3600.0;

// 初始化导航引擎
SinsEngine engine(1.0/400);
engine.Sins_Init(pos, vel, att, eb, db);
```

---

## 6. 测试环境

| 项目 | 值 |
|------|-----|
| 数据文件 | fog3h.csv |
| 采样率 | 400 Hz |
| 总时长 | 3 小时 |
| 对准数据 | 前 2 小时 |
| 导航数据 | 后 1 小时 |
| 传感器 | 光纤陀螺 (FOG) |
| 位置 | 南京 (32.0286°N, 118.8533°E) |

---

## 7. 结论

1. **FOG 存在 371.67 ppm 的刻度因数误差**，通过地球自转模值匹配可有效标定
2. **刻度因数修正后需重新优化参数**，原参数会使性能恶化
3. **综合优化后导航精度提升 33.5%**，从 1.366 nm/h 降至 0.909 nm/h
4. 零偏估计与刻度因数存在耦合，标定后零偏符号可能反转

---

*记录日期: 2025-01-28*  
*测试程序: scale_test.cpp*
